# AI Vocal Bot для MusForums.ru

Интеллектуальный бот-помощник для анализа сообщений и предоставления рекомендаций на форуме MusForums.ru. Использует Google Gemini AI для анализа текстовых сообщений, изображений и аудиофайлов, ведения диалога с пользователями.

⚠️ **Важно:** Для работы бота в России требуется VPN, так как Google Gemini API недоступен на территории РФ.

## Основные компоненты системы

### 1. Графический интерфейс (BotGUI)

#### Вкладка "Управление"
- Управление работой бота (запуск/пауза/остановка)
- Настройки подключения к форуму (URL/логин/пароль)
- Настройка интервала проверки и лимита сообщений
- Просмотр логов работы бота с фильтрацией по уровням (DEBUG, INFO, WARNING, ERROR, CRITICAL)
- Цветовая индикация важности сообщений в логах

#### Вкладка "Файлы"
- Просмотр и редактирование `add_info.txt`
- Интерактивное дерево для просмотра и редактирования JSON файлов памяти
- Просмотр `thread_output.txt`
- Автоматическое форматирование JSON при сохранении
- Подсветка синтаксиса JSON

#### Вкладка "API ключи"
- Добавление/удаление ключей Google Gemini
- Управление списком активных ключей
- Автоматическая ротация ключей

#### Вкладка "Настройки модели"
- Выбор модели Gemini
- Настройка параметров генерации:
  - Temperature
  - Top-p
  - Top-k
  - Максимальное количество токенов

### 2. Система обработки медиафайлов
- Автоматическое скачивание изображений из сообщений
- Загрузка и анализ аудиофайлов
- Временное хранение медиафайлов с автоматической очисткой
- Безопасная загрузка файлов с повторными попытками

### 3. Файловая система

#### Основные файлы
- `add_info.txt` - дополнительная информация для работы бота
- `updated_memory.json` - текущая база знаний бота
- `new_memory.json` - временный файл с новыми данными
- `old_memory.json` - предыдущая версия памяти
- `thread_output.txt` - вывод обработки тредов

### 4. Система логирования
- `bot_gui.log` - лог работы GUI
- `parser.log` - лог работы парсера с ротацией файлов
- `memory_updates.log` - лог обновлений памяти
- Настраиваемые фильтры для разных типов сообщений
- Отдельный лог для важных сообщений

## Функциональность

### Мониторинг форума
- Отслеживание новых сообщений в указанных тредах
- Обработка текста, изображений и аудио через Gemini AI
- Сохранение истории обработанных сообщений
- Защита от дублирования сообщений

### Безопасность и надежность
- Локальное хранение конфигурации в `bot_config.json`
- Система ротации API ключей
- Механизм повторных попыток при сетевых ошибках
- Безопасное завершение работы с очисткой временных файлов

### Интеграция с форумом
- Автоматическая авторизация
- Публикация ответов с учетом форматирования
- Обработка медиаконтента
- Поддержка сессий

### Управление памятью
- Динамическое обновление базы знаний
- Сохранение истории изменений
- Валидация JSON при сохранении
- Автоматическое резервное копирование
